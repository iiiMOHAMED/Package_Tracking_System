{"ast":null,"code":"import { jwtDecode } from \"jwt-decode\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../order.service\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nfunction UserOrdersComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2, \"Only for Customers!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/order-details\", a1];\n};\nfunction UserOrdersComponent_div_1_table_6_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 7);\n    i0.ɵɵtext(9, \"Show Details\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const order_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r6.orderNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r6.dropOffLocation);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r6.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, order_r6.orderNumber));\n  }\n}\nfunction UserOrdersComponent_div_1_table_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 5)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Order Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Dropoff Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Action\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, UserOrdersComponent_div_1_table_6_tr_12_Template, 10, 6, \"tr\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.orders);\n  }\n}\nfunction UserOrdersComponent_div_1_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No orders found for this user.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserOrdersComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 1);\n    i0.ɵɵtext(2, \"My Orders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 2)(4, \"button\");\n    i0.ɵɵtext(5, \"Return\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, UserOrdersComponent_div_1_table_6_Template, 13, 1, \"table\", 3);\n    i0.ɵɵtemplate(7, UserOrdersComponent_div_1_ng_template_7_Template, 2, 0, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(8);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.orders.length > 0)(\"ngIfElse\", _r3);\n  }\n}\nexport class UserOrdersComponent {\n  constructor( /*private route: ActivatedRoute,*/orderService, authService) {\n    this.orderService = orderService;\n    this.authService = authService;\n    this.userId = 0;\n    this.orders = [];\n    this.errorMessage = '';\n    this.role = '';\n    const token = this.authService.getToken();\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      this.userId = decodedToken.sub;\n      this.role = decodedToken.role;\n      console.log(\"test1:\" + this.userId);\n      console.log(\"test1:\" + this.role);\n    } else {\n      console.log(\"test2:\" + this.userId);\n      console.log(\"test2:\" + this.role);\n    }\n  }\n  isCus() {\n    if (this.role === \"customer\") {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  ngOnInit() {\n    /* Retrieve user ID from the URL parameter\n    this.userId = +this.route.snapshot.paramMap.get('id')!;\n    */\n    // Get orders for the current user\n    this.orderService.getUserOrders(this.userId).subscribe({\n      next: data => {\n        this.orders = data; // Successfully received orders\n      },\n\n      error: error => {\n        this.errorMessage = 'There was an error retrieving orders.'; // Handle error\n        console.error(error); // Log the error for debugging\n      },\n\n      complete: () => {\n        console.log('User orders fetch complete'); // Optionally log completion\n      }\n    });\n  }\n\n  static {\n    this.ɵfac = function UserOrdersComponent_Factory(t) {\n      return new (t || UserOrdersComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.AuthService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserOrdersComponent,\n      selectors: [[\"app-user-orders\"]],\n      decls: 2,\n      vars: 2,\n      consts: [[4, \"ngIf\"], [1, \"my-orders-heading\"], [\"href\", \"/home\", 1, \"return-button\"], [\"border\", \"2\", 4, \"ngIf\", \"ngIfElse\"], [\"noOrders\", \"\"], [\"border\", \"2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"details-button\", 3, \"routerLink\"]],\n      template: function UserOrdersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, UserOrdersComponent_div_0_Template, 3, 0, \"div\", 0);\n          i0.ɵɵtemplate(1, UserOrdersComponent_div_1_Template, 9, 2, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", !ctx.isCus());\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isCus());\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.RouterLink],\n      styles: [\"\\n\\nbody[_ngcontent-%COMP%] {\\n    font-family: 'Inter', sans-serif;\\n  }\\n.my-orders-heading[_ngcontent-%COMP%] {\\n    text-align: center;\\n    color: #007aff; \\n\\n    font-size: 28px;\\n    margin-bottom: 20px;\\n  }\\n  \\n  \\n\\n  .return-button[_ngcontent-%COMP%] {\\n    position: absolute;\\n    top: 20px;\\n    right: 20px; \\n\\n  }\\n  \\n  .return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    background-color: #007aff; \\n\\n    color: #fff;\\n    padding: 6px 12px; \\n\\n    font-size: 12px; \\n\\n    border: none;\\n    border-radius: 8px;\\n    cursor: pointer;\\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\\n    transition: background-color 0.3s ease, transform 0.2s ease;\\n  }\\n  \\n  .return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n    background-color: #005b8a;\\n    transform: translateY(-2px);\\n  }\\n  \\n  .return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active {\\n    background-color: #004070;\\n    transform: translateY(0);\\n  }\\n  \\n  \\n\\n  table[_ngcontent-%COMP%] {\\n    width: 80%; \\n\\n    max-width: 800px; \\n\\n    margin: 50px auto; \\n\\n    text-align: left;\\n    border-collapse: collapse;\\n    font-size: 16px; \\n\\n  }\\n  \\n  table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    padding: 12px 20px;\\n  }\\n  \\n  table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n    background-color: #f1f1f1;\\n    color: #333;\\n  }\\n  \\n  table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    background-color: #fff;\\n    border: 1px solid #ddd;\\n  }\\n  \\n  \\n\\n  .details-button[_ngcontent-%COMP%] {\\n    background-color: #007aff; \\n\\n    color: #fff;\\n    padding: 6px 12px; \\n\\n    font-size: 12px; \\n\\n    border: none;\\n    border-radius: 8px;\\n    cursor: pointer;\\n    transition: background-color 0.3s ease, transform 0.2s ease;\\n  }\\n  \\n  .details-button[_ngcontent-%COMP%]:hover {\\n    background-color: #005b8a;\\n    transform: translateY(-2px);\\n  }\\n  \\n  .details-button[_ngcontent-%COMP%]:active {\\n    background-color: #004070;\\n    transform: translateY(0);\\n  }\\n  \\n  \\n\\n  @media (max-width: 480px) {\\n    table[_ngcontent-%COMP%] {\\n      font-size: 14px; \\n\\n    }\\n  \\n    .return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n      padding: 6px 12px;\\n      font-size: 12px;\\n    }\\n  \\n    .details-button[_ngcontent-%COMP%] {\\n      padding: 6px 12px;\\n      font-size: 12px;\\n    }\\n  }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdXNlci1vcmRlcnMvdXNlci1vcmRlcnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQ0FBbUM7QUFDbkM7SUFDSSxnQ0FBZ0M7RUFDbEM7QUFDRjtJQUNJLGtCQUFrQjtJQUNsQixjQUFjLEVBQUUsK0JBQStCO0lBQy9DLGVBQWU7SUFDZixtQkFBbUI7RUFDckI7O0VBRUEsdURBQXVEO0VBQ3ZEO0lBQ0Usa0JBQWtCO0lBQ2xCLFNBQVM7SUFDVCxXQUFXLEVBQUUsa0NBQWtDO0VBQ2pEOztFQUVBO0lBQ0UseUJBQXlCLEVBQUUsYUFBYTtJQUN4QyxXQUFXO0lBQ1gsaUJBQWlCLEVBQUUsbUNBQW1DO0lBQ3RELGVBQWUsRUFBRSxzQkFBc0I7SUFDdkMsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2Ysd0NBQXdDO0lBQ3hDLDJEQUEyRDtFQUM3RDs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QiwyQkFBMkI7RUFDN0I7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsd0JBQXdCO0VBQzFCOztFQUVBLHlDQUF5QztFQUN6QztJQUNFLFVBQVUsRUFBRSwyQ0FBMkM7SUFDdkQsZ0JBQWdCLEVBQUUsNkRBQTZEO0lBQy9FLGlCQUFpQixFQUFFLDhEQUE4RDtJQUNqRixnQkFBZ0I7SUFDaEIseUJBQXlCO0lBQ3pCLGVBQWUsRUFBRSxvQ0FBb0M7RUFDdkQ7O0VBRUE7SUFDRSxrQkFBa0I7RUFDcEI7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsV0FBVztFQUNiOztFQUVBO0lBQ0Usc0JBQXNCO0lBQ3RCLHNCQUFzQjtFQUN4Qjs7RUFFQSxpQ0FBaUM7RUFDakM7SUFDRSx5QkFBeUIsRUFBRSxhQUFhO0lBQ3hDLFdBQVc7SUFDWCxpQkFBaUIsRUFBRSxtQ0FBbUM7SUFDdEQsZUFBZSxFQUFFLHNCQUFzQjtJQUN2QyxZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZiwyREFBMkQ7RUFDN0Q7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsMkJBQTJCO0VBQzdCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLHdCQUF3QjtFQUMxQjs7RUFFQSw0Q0FBNEM7RUFDNUM7SUFDRTtNQUNFLGVBQWUsRUFBRSxpREFBaUQ7SUFDcEU7O0lBRUE7TUFDRSxpQkFBaUI7TUFDakIsZUFBZTtJQUNqQjs7SUFFQTtNQUNFLGlCQUFpQjtNQUNqQixlQUFlO0lBQ2pCO0VBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBDZW50ZXIgdGhlIFwiTXkgT3JkZXJzXCIgaGVhZGluZyAqL1xyXG5ib2R5IHtcclxuICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmO1xyXG4gIH1cclxuLm15LW9yZGVycy1oZWFkaW5nIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGNvbG9yOiAjMDA3YWZmOyAvKiBCbHVlIGNvbG9yIGZvciB0aGUgaGVhZGluZyAqL1xyXG4gICAgZm9udC1zaXplOiAyOHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgLyogUG9zaXRpb24gdGhlIFJldHVybiBidXR0b24gdG8gdGhlIHRvcC1yaWdodCBjb3JuZXIgKi9cclxuICAucmV0dXJuLWJ1dHRvbiB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDIwcHg7XHJcbiAgICByaWdodDogMjBweDsgLyogTW92ZXMgdGhlIGJ1dHRvbiB0byB0aGUgcmlnaHQgKi9cclxuICB9XHJcbiAgXHJcbiAgLnJldHVybi1idXR0b24gYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdhZmY7IC8qIGlPUyBibHVlICovXHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICAgIHBhZGRpbmc6IDZweCAxMnB4OyAvKiBTbWFsbGVyIHBhZGRpbmcgZm9yIHRoZSBidXR0b24gKi9cclxuICAgIGZvbnQtc2l6ZTogMTJweDsgLyogU21hbGxlciBmb250IHNpemUgKi9cclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZSwgdHJhbnNmb3JtIDAuMnMgZWFzZTtcclxuICB9XHJcbiAgXHJcbiAgLnJldHVybi1idXR0b24gYnV0dG9uOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDViOGE7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XHJcbiAgfVxyXG4gIFxyXG4gIC5yZXR1cm4tYnV0dG9uIGJ1dHRvbjphY3RpdmUge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwNDA3MDtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcclxuICB9XHJcbiAgXHJcbiAgLyogQ2VudGVyIHRoZSB0YWJsZSBhbmQgbGltaXQgaXRzIHdpZHRoICovXHJcbiAgdGFibGUge1xyXG4gICAgd2lkdGg6IDgwJTsgLyogU2V0IHRoZSB0YWJsZSB0byA4MCUgb2YgdGhlIHBhZ2Ugd2lkdGggKi9cclxuICAgIG1heC13aWR0aDogODAwcHg7IC8qIE9wdGlvbmFsOiB0byBtYWtlIHN1cmUgdGhlIHRhYmxlIGRvZXNuJ3QgYmVjb21lIHRvbyB3aWRlICovXHJcbiAgICBtYXJnaW46IDUwcHggYXV0bzsgLyogQ2VudGVyIHRoZSB0YWJsZSBob3Jpem9udGFsbHkgYW5kIGdpdmUgaXQgc29tZSB0b3AgbWFyZ2luICovXHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDsgLyogTGFyZ2VyIGZvbnQgc2l6ZSBmb3IgdGFibGUgdGV4dCAqL1xyXG4gIH1cclxuICBcclxuICB0YWJsZSB0aCwgdGFibGUgdGQge1xyXG4gICAgcGFkZGluZzogMTJweCAyMHB4O1xyXG4gIH1cclxuICBcclxuICB0YWJsZSB0aCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFmMWYxO1xyXG4gICAgY29sb3I6ICMzMzM7XHJcbiAgfVxyXG4gIFxyXG4gIHRhYmxlIHRkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xyXG4gIH1cclxuICBcclxuICAvKiBVcGRhdGUgXCJTaG93IERldGFpbHNcIiBidXR0b24gKi9cclxuICAuZGV0YWlscy1idXR0b24ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2FmZjsgLyogaU9TIGJsdWUgKi9cclxuICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgcGFkZGluZzogNnB4IDEycHg7IC8qIFNtYWxsZXIgcGFkZGluZyBmb3IgdGhlIGJ1dHRvbiAqL1xyXG4gICAgZm9udC1zaXplOiAxMnB4OyAvKiBTbWFsbGVyIGZvbnQgc2l6ZSAqL1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UsIHRyYW5zZm9ybSAwLjJzIGVhc2U7XHJcbiAgfVxyXG4gIFxyXG4gIC5kZXRhaWxzLWJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1YjhhO1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xyXG4gIH1cclxuICBcclxuICAuZGV0YWlscy1idXR0b246YWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDQwNzA7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIE1vYmlsZSByZXNwb25zaXZlbmVzcyBmb3Igc21hbGwgc2NyZWVucyAqL1xyXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkge1xyXG4gICAgdGFibGUge1xyXG4gICAgICBmb250LXNpemU6IDE0cHg7IC8qIFNsaWdodGx5IHNtYWxsZXIgZm9udCBzaXplIGZvciBzbWFsbCBzY3JlZW5zICovXHJcbiAgICB9XHJcbiAgXHJcbiAgICAucmV0dXJuLWJ1dHRvbiBidXR0b24ge1xyXG4gICAgICBwYWRkaW5nOiA2cHggMTJweDtcclxuICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLmRldGFpbHMtYnV0dG9uIHtcclxuICAgICAgcGFkZGluZzogNnB4IDEycHg7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgIH1cclxuICB9XHJcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["jwtDecode","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","order_r6","orderNumber","dropOffLocation","status","ɵɵproperty","ɵɵpureFunction1","_c0","ɵɵtemplate","UserOrdersComponent_div_1_table_6_tr_12_Template","ctx_r2","orders","UserOrdersComponent_div_1_table_6_Template","UserOrdersComponent_div_1_ng_template_7_Template","ɵɵtemplateRefExtractor","ctx_r1","length","_r3","UserOrdersComponent","constructor","orderService","authService","userId","errorMessage","role","token","getToken","decodedToken","sub","console","log","isCus","ngOnInit","getUserOrders","subscribe","next","data","error","complete","ɵɵdirectiveInject","i1","OrderService","i2","AuthService","selectors","decls","vars","consts","template","UserOrdersComponent_Template","rf","ctx","UserOrdersComponent_div_0_Template","UserOrdersComponent_div_1_Template"],"sources":["C:\\Users\\imoha\\Desktop\\Package_Tracking_System\\frontend\\src\\app\\user-orders\\user-orders.component.ts","C:\\Users\\imoha\\Desktop\\Package_Tracking_System\\frontend\\src\\app\\user-orders\\user-orders.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { OrderService } from '../order.service';\r\nimport { AuthService } from '../auth.service';\r\nimport { jwtDecode } from \"jwt-decode\";\r\n@Component({\r\n  selector: 'app-user-orders',\r\n  templateUrl: './user-orders.component.html',\r\n  styleUrls: ['./user-orders.component.css']\r\n})\r\nexport class UserOrdersComponent implements OnInit {\r\n  userId: number= 0;\r\n  orders: any[] = [];\r\n  errorMessage: string = '';\r\n  role:string='';\r\n  constructor(\r\n    /*private route: ActivatedRoute,*/ private orderService: OrderService,private authService: AuthService) {\r\n      const token = this.authService.getToken();\r\n    if (token) {\r\n      const decodedToken: any = jwtDecode(token);\r\n      this.userId = decodedToken.sub; \r\n      this.role=decodedToken.role;\r\n      console.log(\"test1:\"+this.userId)\r\n      console.log(\"test1:\"+this.role)\r\n    }\r\n    else{ \r\n      console.log(\"test2:\"+this.userId)\r\n      console.log(\"test2:\"+this.role)\r\n    }\r\n    }\r\n    isCus(){\r\n      if(this.role===\"customer\"){\r\n        return true;\r\n      }\r\n      else{\r\n        return false;\r\n      }\r\n  \r\n    }\r\n\r\n  ngOnInit(): void {\r\n    /* Retrieve user ID from the URL parameter\r\n    this.userId = +this.route.snapshot.paramMap.get('id')!;\r\n    */\r\n    \r\n    \r\n    // Get orders for the current user\r\n    this.orderService.getUserOrders(this.userId).subscribe({\r\n      next: (data) => {\r\n        this.orders = data; // Successfully received orders\r\n      },\r\n      error: (error) => {\r\n        this.errorMessage = 'There was an error retrieving orders.'; // Handle error\r\n        console.error(error); // Log the error for debugging\r\n      },\r\n      complete: () => {\r\n        console.log('User orders fetch complete'); // Optionally log completion\r\n      }\r\n    });\r\n  }\r\n}\r\n//activated route w el snapshot l fo2 knt hst5dmm lw knt b5ly l id yt7t fil path men abl l 5atwa de fa hwa ye retrieve it mel url\r\n//lw kan mktoob msln /orders/users/2 fa kan haya5od l 2\r\n","<div *ngIf=\"!isCus()\">\r\n  <h2>Only for Customers!</h2>\r\n</div>\r\n\r\n<div *ngIf=\"isCus()\">\r\n  <h2 class=\"my-orders-heading\">My Orders</h2>\r\n  <a href=\"/home\" class=\"return-button\">\r\n    <button>Return</button>\r\n  </a>\r\n  <table border=\"2\" *ngIf=\"orders.length > 0; else noOrders\">\r\n    <thead>\r\n      <tr>\r\n        <th>Order Number</th>\r\n        <th>Dropoff Location</th>\r\n        <th>Status</th>\r\n        <th>Action</th> \r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let order of orders\">\r\n        <td>{{ order.orderNumber }}</td>\r\n        <td>{{ order.dropOffLocation }}</td>  \r\n        <td>{{ order.status }}</td>\r\n        <td>\r\n          <!-- Button to navigate to the order details page -->\r\n          <button class=\"details-button\" [routerLink]=\"['/order-details', order.orderNumber]\">Show Details</button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <ng-template #noOrders>\r\n    <p>No orders found for this user.</p>\r\n  </ng-template>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}