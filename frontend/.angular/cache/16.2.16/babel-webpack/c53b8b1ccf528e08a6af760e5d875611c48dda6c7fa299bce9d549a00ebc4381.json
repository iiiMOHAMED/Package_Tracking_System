{"ast":null,"code":"import { jwtDecode } from \"jwt-decode\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../order.service\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/common\";\nfunction UserOrdersComponent_table_2_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.orderNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.pickupLocation);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.dropOffLocation);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.packageDetails);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.deliveryTime);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r4.status);\n  }\n}\nfunction UserOrdersComponent_table_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Order Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Pickup Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Dropoff Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Package Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Delivery Time\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Status\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, UserOrdersComponent_table_2_tr_16_Template, 13, 6, \"tr\", 2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.orders);\n  }\n}\nfunction UserOrdersComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No orders found for this user.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class UserOrdersComponent {\n  constructor( /*private route: ActivatedRoute,*/orderService, authService) {\n    this.orderService = orderService;\n    this.authService = authService;\n    this.userId = 0;\n    this.orders = [];\n    this.errorMessage = '';\n    const token = this.authService.getToken();\n    if (token) {\n      const decodedToken = jwtDecode(token);\n      this.userId = decodedToken.sub;\n      console.log(\"test1:\" + this.userId);\n    } else {\n      console.log(\"test2:\" + this.userId);\n    }\n  }\n  ngOnInit() {\n    /* Retrieve user ID from the URL parameter\n    this.userId = +this.route.snapshot.paramMap.get('id')!;\n    */\n    // Get orders for the current user\n    this.orderService.getUserOrders(this.userId).subscribe({\n      next: data => {\n        this.orders = data; // Successfully received orders\n      },\n\n      error: error => {\n        this.errorMessage = 'There was an error retrieving orders.'; // Handle error\n        console.error(error); // Log the error for debugging\n      },\n\n      complete: () => {\n        console.log('User orders fetch complete'); // Optionally log completion\n      }\n    });\n  }\n\n  static {\n    this.ɵfac = function UserOrdersComponent_Factory(t) {\n      return new (t || UserOrdersComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.AuthService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserOrdersComponent,\n      selectors: [[\"app-user-orders\"]],\n      decls: 5,\n      vars: 2,\n      consts: [[4, \"ngIf\", \"ngIfElse\"], [\"noOrders\", \"\"], [4, \"ngFor\", \"ngForOf\"]],\n      template: function UserOrdersComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\");\n          i0.ɵɵtext(1, \"User Orders\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(2, UserOrdersComponent_table_2_Template, 17, 1, \"table\", 0);\n          i0.ɵɵtemplate(3, UserOrdersComponent_ng_template_3_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(4);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.orders.length > 0)(\"ngIfElse\", _r1);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["jwtDecode","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","order_r4","orderNumber","pickupLocation","dropOffLocation","packageDetails","deliveryTime","status","ɵɵtemplate","UserOrdersComponent_table_2_tr_16_Template","ɵɵproperty","ctx_r0","orders","UserOrdersComponent","constructor","orderService","authService","userId","errorMessage","token","getToken","decodedToken","sub","console","log","ngOnInit","getUserOrders","subscribe","next","data","error","complete","ɵɵdirectiveInject","i1","OrderService","i2","AuthService","selectors","decls","vars","consts","template","UserOrdersComponent_Template","rf","ctx","UserOrdersComponent_table_2_Template","UserOrdersComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","length","_r1"],"sources":["C:\\Users\\imoha\\Desktop\\Package_Tracking_System\\frontend\\src\\app\\user-orders\\user-orders.component.ts","C:\\Users\\imoha\\Desktop\\Package_Tracking_System\\frontend\\src\\app\\user-orders\\user-orders.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { OrderService } from '../order.service';\r\nimport { AuthService } from '../auth.service';\r\nimport { jwtDecode } from \"jwt-decode\";\r\n@Component({\r\n  selector: 'app-user-orders',\r\n  templateUrl: './user-orders.component.html',\r\n  styleUrls: ['./user-orders.component.css']\r\n})\r\nexport class UserOrdersComponent implements OnInit {\r\n  userId: number= 0;\r\n  orders: any[] = [];\r\n  errorMessage: string = '';\r\n\r\n  constructor(\r\n    /*private route: ActivatedRoute,*/ private orderService: OrderService,private authService: AuthService) {\r\n      const token = this.authService.getToken();\r\n    if (token) {\r\n      const decodedToken: any = jwtDecode(token);\r\n      this.userId = decodedToken.sub; \r\n      console.log(\"test1:\"+this.userId)\r\n    }\r\n    else{ \r\n      console.log(\"test2:\"+this.userId)\r\n    }\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    /* Retrieve user ID from the URL parameter\r\n    this.userId = +this.route.snapshot.paramMap.get('id')!;\r\n    */\r\n    \r\n    \r\n    // Get orders for the current user\r\n    this.orderService.getUserOrders(this.userId).subscribe({\r\n      next: (data) => {\r\n        this.orders = data; // Successfully received orders\r\n      },\r\n      error: (error) => {\r\n        this.errorMessage = 'There was an error retrieving orders.'; // Handle error\r\n        console.error(error); // Log the error for debugging\r\n      },\r\n      complete: () => {\r\n        console.log('User orders fetch complete'); // Optionally log completion\r\n      }\r\n    });\r\n  }\r\n}\r\n//activated route w el snapshot l fo2 knt hst5dmm lw knt b5ly l id yt7t fil path men abl l 5atwa de fa hwa ye retrieve it mel url\r\n//lw kan mktoob msln /orders/users/2 fa kan haya5od l 2\r\n","<h2>User Orders</h2>\r\n<table *ngIf=\"orders.length > 0; else noOrders\">\r\n  <thead>\r\n    <tr>\r\n      <th>Order Number</th>\r\n      <th>Pickup Location</th>\r\n      <th>Dropoff Location</th>\r\n      <th>Package Details</th>\r\n      <th>Delivery Time</th>\r\n      <th>Status</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let order of orders\">\r\n      <td>{{ order.orderNumber }}</td>\r\n      <td>{{ order.pickupLocation }}</td>\r\n      <td>{{ order.dropOffLocation }}</td>\r\n      <td>{{ order.packageDetails }}</td>\r\n      <td>{{ order.deliveryTime }}</td>\r\n      <td>{{ order.status }}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n<ng-template #noOrders>\r\n  <p>No orders found for this user.</p>\r\n</ng-template>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}